{"version":3,"file":"_id_-CbTa5eSG.js","sources":["../../../../pages/board/[id].vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div v-if=\"pending\" class=\"loading\">\r\n      데이터를 불러오는 중...\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"error\">\r\n      오류가 발생했습니다: {{ error.message }}\r\n    </div>\r\n    \r\n    <div v-else-if=\"!isEditMode && data && data.success\">\r\n      <div class=\"view-container\">\r\n        <h1>{{ data.data.title }}</h1>\r\n        \r\n        <div class=\"post-info\">\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">작성자:</span>\r\n            <span>{{ data.data.writer }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">작성일:</span>\r\n            <span>{{ formatDate(data.data.regDate) }}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"label\">조회수:</span>\r\n            <span>{{ data.data.hitno }}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"content-box\">\r\n          <div class=\"content\" v-html=\"formatContent(data.data.content)\"></div>\r\n        </div>\r\n        \r\n        <div class=\"button-group\">\r\n          <button \r\n            v-if=\"data.prev\" \r\n            @click=\"goToPost(data.prev.bno)\" \r\n            class=\"nav-btn\"\r\n          >\r\n            ← 이전 게시물\r\n          </button>\r\n          <button v-else class=\"nav-btn\" disabled>← 이전 게시물</button>\r\n          \r\n          <button @click=\"goToList\" class=\"list-btn\">\r\n            목록\r\n          </button>\r\n          \r\n          <button \r\n            v-if=\"data.next\" \r\n            @click=\"goToPost(data.next.bno)\" \r\n            class=\"nav-btn\"\r\n          >\r\n            다음 게시물 →\r\n          </button>\r\n          <button v-else class=\"nav-btn\" disabled>다음 게시물 →</button>\r\n        </div>\r\n        \r\n        <div class=\"action-buttons\" v-if=\"isOwner\">\r\n          <button @click=\"enableEditMode\" class=\"edit-btn\">\r\n            수정\r\n          </button>\r\n          <button @click=\"showDeleteModal = true\" class=\"delete-btn\">\r\n            삭제\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- 수정 모드 -->\r\n    <div v-else-if=\"isEditMode\" class=\"edit-container\">\r\n      <h1>게시물 수정</h1>\r\n      \r\n      <form @submit.prevent=\"handleUpdate\" class=\"edit-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"title\">제목 *</label>\r\n          <input \r\n            type=\"text\" \r\n            id=\"title\" \r\n            v-model=\"editData.title\"\r\n            required\r\n          />\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label for=\"content\">내용 *</label>\r\n          <textarea \r\n            id=\"content\" \r\n            v-model=\"editData.content\"\r\n            rows=\"15\"\r\n            required\r\n          ></textarea>\r\n        </div>\r\n        \r\n        <div v-if=\"errorMessage\" class=\"error-message\">\r\n          {{ errorMessage }}\r\n        </div>\r\n        \r\n        <div class=\"button-group\">\r\n          <button type=\"submit\" class=\"submit-btn\" :disabled=\"isSubmitting\">\r\n            {{ isSubmitting ? '수정 중...' : '수정' }}\r\n          </button>\r\n          <button type=\"button\" @click=\"cancelEdit\" class=\"cancel-btn\">\r\n            취소\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    \r\n    <!-- 삭제 확인 모달 -->\r\n    <div v-if=\"showDeleteModal\" class=\"modal-overlay\" @click=\"showDeleteModal = false\">\r\n      <div class=\"modal-content\" @click.stop>\r\n        <h2>게시물 삭제</h2>\r\n        <p>정말로 이 게시물을 삭제하시겠습니까?</p>\r\n        <div class=\"modal-buttons\">\r\n          <button @click=\"handleDelete\" class=\"confirm-btn\">\r\n            확인\r\n          </button>\r\n          <button @click=\"showDeleteModal = false\" class=\"cancel-btn\">\r\n            취소\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst userId = useCookie('user_id');\r\n\r\n// 인증 체크\r\nonMounted(() => {\r\n  const token = useCookie('auth_token');\r\n  if (!token.value) {\r\n    router.push('/');\r\n  }\r\n});\r\n\r\nconst { data, pending, error, refresh } = await useFetch(`/api/board/${route.params.id}`);\r\n\r\nconst isOwner = computed(() => {\r\n  if (!data.value || !data.value.data) return false;\r\n  return data.value.data.userid === userId.value;\r\n});\r\n\r\nconst isEditMode = ref(false);\r\nconst showDeleteModal = ref(false);\r\nconst isSubmitting = ref(false);\r\nconst errorMessage = ref('');\r\n\r\nconst editData = ref({\r\n  title: '',\r\n  content: ''\r\n});\r\n\r\nconst enableEditMode = () => {\r\n  editData.value.title = data.value.data.title;\r\n  editData.value.content = data.value.data.content;\r\n  isEditMode.value = true;\r\n};\r\n\r\nconst cancelEdit = () => {\r\n  isEditMode.value = false;\r\n  errorMessage.value = '';\r\n};\r\n\r\nconst handleUpdate = async () => {\r\n  if (isSubmitting.value) return;\r\n  \r\n  isSubmitting.value = true;\r\n  errorMessage.value = '';\r\n  \r\n  try {\r\n    const response = await $fetch(`/api/board/${route.params.id}`, {\r\n      method: 'PUT',\r\n      body: editData.value\r\n    });\r\n    \r\n    if (response.success) {\r\n      alert('게시물이 수정되었습니다.');\r\n      isEditMode.value = false;\r\n      refresh();\r\n    } else {\r\n      errorMessage.value = response.error || '게시물 수정에 실패했습니다.';\r\n    }\r\n  } catch (error) {\r\n    console.error('Update error:', error);\r\n    errorMessage.value = '게시물 수정 중 오류가 발생했습니다.';\r\n  } finally {\r\n    isSubmitting.value = false;\r\n  }\r\n};\r\n\r\nconst handleDelete = async () => {\r\n  try {\r\n    const response = await $fetch(`/api/board/${route.params.id}`, {\r\n      method: 'DELETE'\r\n    });\r\n    \r\n    if (response.success) {\r\n      alert('게시물이 삭제되었습니다.');\r\n      router.push('/');\r\n    } else {\r\n      alert(response.error || '게시물 삭제에 실패했습니다.');\r\n    }\r\n  } catch (error) {\r\n    console.error('Delete error:', error);\r\n    alert('게시물 삭제 중 오류가 발생했습니다.');\r\n  } finally {\r\n    showDeleteModal.value = false;\r\n  }\r\n};\r\n\r\nconst goToList = () => {\r\n  router.push('/board/list');\r\n};\r\n\r\nconst goToPost = (bno) => {\r\n  router.push(`/board/${bno}`);\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  \r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  const hours = String(date.getHours()).padStart(2, '0');\r\n  const minutes = String(date.getMinutes()).padStart(2, '0');\r\n  \r\n  return `${year}-${month}-${day} ${hours}:${minutes}`;\r\n};\r\n\r\nconst formatContent = (content) => {\r\n  if (!content) return '';\r\n  return content.replace(/\\n/g, '<br>');\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 40px;\r\n  color: #666;\r\n  font-size: 18px;\r\n}\r\n\r\n.error {\r\n  padding: 20px;\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n  border-radius: 4px;\r\n  margin: 20px 0;\r\n}\r\n\r\n.view-container {\r\n  background-color: white;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\nh1 {\r\n  color: #333;\r\n  margin-bottom: 20px;\r\n  padding-bottom: 15px;\r\n  border-bottom: 2px solid #4CAF50;\r\n}\r\n\r\n.post-info {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n  padding: 15px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 4px;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  gap: 8px;\r\n  font-size: 14px;\r\n}\r\n\r\n.label {\r\n  font-weight: bold;\r\n  color: #666;\r\n}\r\n\r\n.content-box {\r\n  min-height: 300px;\r\n  padding: 20px;\r\n  margin-bottom: 30px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  background-color: #fafafa;\r\n}\r\n\r\n.content {\r\n  line-height: 1.8;\r\n  color: #333;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin-bottom: 20px;\r\n  padding-top: 20px;\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.nav-btn,\r\n.list-btn {\r\n  padding: 10px 20px;\r\n  border: 1px solid #ddd;\r\n  background-color: white;\r\n  color: #333;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.nav-btn:hover:not(:disabled),\r\n.list-btn:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.nav-btn:disabled {\r\n  background-color: #f5f5f5;\r\n  color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.list-btn {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border-color: #4CAF50;\r\n}\r\n\r\n.list-btn:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n}\r\n\r\n.edit-btn,\r\n.delete-btn {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.edit-btn {\r\n  background-color: #2196F3;\r\n  color: white;\r\n}\r\n\r\n.edit-btn:hover {\r\n  background-color: #1976D2;\r\n}\r\n\r\n.delete-btn {\r\n  background-color: #f44336;\r\n  color: white;\r\n}\r\n\r\n.delete-btn:hover {\r\n  background-color: #d32f2f;\r\n}\r\n\r\n/* 수정 모드 스타일 */\r\n.edit-container {\r\n  background-color: white;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.edit-form .form-group {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.edit-form label {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  color: #333;\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n}\r\n\r\n.edit-form input,\r\n.edit-form textarea {\r\n  width: 100%;\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  box-sizing: border-box;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.edit-form input:focus,\r\n.edit-form textarea:focus {\r\n  outline: none;\r\n  border-color: #4CAF50;\r\n}\r\n\r\n.edit-form textarea {\r\n  resize: vertical;\r\n  font-family: inherit;\r\n}\r\n\r\n.error-message {\r\n  padding: 12px;\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n  border-radius: 4px;\r\n  margin-bottom: 20px;\r\n  font-size: 14px;\r\n}\r\n\r\n.submit-btn,\r\n.cancel-btn {\r\n  padding: 12px 30px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.submit-btn {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\n.submit-btn:hover:not(:disabled) {\r\n  background-color: #45a049;\r\n}\r\n\r\n.submit-btn:disabled {\r\n  background-color: #ccc;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.cancel-btn {\r\n  background-color: #f5f5f5;\r\n  color: #333;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n.cancel-btn:hover {\r\n  background-color: #e0e0e0;\r\n}\r\n\r\n/* 모달 스타일 */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.modal-content {\r\n  background-color: white;\r\n  padding: 30px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  max-width: 400px;\r\n  width: 90%;\r\n}\r\n\r\n.modal-content h2 {\r\n  margin-top: 0;\r\n  margin-bottom: 15px;\r\n  color: #333;\r\n}\r\n\r\n.modal-content p {\r\n  margin-bottom: 25px;\r\n  color: #666;\r\n}\r\n\r\n.modal-buttons {\r\n  display: flex;\r\n  gap: 10px;\r\n  justify-content: center;\r\n}\r\n\r\n.confirm-btn {\r\n  padding: 10px 20px;\r\n  background-color: #f44336;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.confirm-btn:hover {\r\n  background-color: #d32f2f;\r\n}\r\n</style>\r\n"],"names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate","_ssrRenderAttr"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA+HA,UAAM,QAAQ,SAAQ;AACP,cAAS;AACxB,UAAM,SAAS,UAAU,SAAS;AAUlC,UAAM,EAAE,MAAM,SAAS,OAAO,QAAO,KAAK,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,SAAS,cAAc,MAAM,OAAO,EAAE,IAAC,aAAC,CAAA;AAExF,UAAM,UAAU,SAAS,MAAM;AAC7B,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,KAAM,QAAO;AAC5C,aAAO,KAAK,MAAM,KAAK,WAAW,OAAO;AAAA,IAC3C,CAAC;AAED,UAAM,aAAa,IAAI,KAAK;AAC5B,UAAM,kBAAkB,IAAI,KAAK;AACjC,UAAM,eAAe,IAAI,KAAK;AAC9B,UAAM,eAAe,IAAI,EAAE;AAE3B,UAAM,WAAW,IAAI;AAAA,MACnB,OAAO;AAAA,MACP,SAAS;AAAA,IACX,CAAC;AAoED,UAAM,aAAa,CAAC,eAAe;AACjC,UAAI,CAAC,WAAY,QAAO;AAExB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,YAAM,OAAO,KAAK;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAO,CAAE,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAQ,CAAE,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAU,CAAE,EAAE,SAAS,GAAG,GAAG;AAEzD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IACpD;AAEA,UAAM,gBAAgB,CAAC,YAAY;AACjC,UAAI,CAAC,QAAS,QAAO;AACrB,aAAO,QAAQ,QAAQ,OAAO,MAAM;AAAA,IACtC;;AA7OO,YAAA,OAAAC,eAAAC,WAAA,EAAA,OAAM,eAAW,MAAA,CAAA,CAAA,mBAAA;UACTC,MAAA,OAAA,GAAO;;iBAIFA,MAAA,KAAA,GAAK;AACJ,cAAA,mDAAAC,eAAAD,MAAA,KAAA,EAAM,OAAO,CAAA,QAAA;AAAA,MAGb,WAAA,CAAAA,MAAA,UAAA,KAAcA,MAAA,IAAA,KAAQA,MAAA,IAAA,EAAK,SAAO;qHAExCA,MAAA,IAAA,EAAK,KAAK,KAAK,2KAKTA,MAAA,IAAA,EAAK,KAAK,MAAM,6HAIhBC,eAAA,WAAWD,MAAA,IAAA,EAAK,KAAK,OAAO,CAAA,4IAI5BA,MAAA,IAAA,EAAK,KAAK,KAAK,qGAKG,cAAcA,MAAA,IAAA,EAAK,KAAK,OAAO,KAAA;AAKpD,YAAAA,MAAA,IAAA,EAAK,MAAI;;;;;;AAaT,YAAAA,MAAA,IAAA,EAAK,MAAI;;;;;;YASeA,MAAA,OAAA,GAAO;;;;;;iBAY7BA,MAAA,UAAA,GAAU;wPASTE,cAAA,SAAAF,MAAA,QAAA,EAAS,KAAK,uLASdC,eAAAD,MAAA,QAAA,EAAS,OAAO;YAMlBA,MAAA,YAAA,GAAY;6EAClBA,MAAA,YAAA,CAAY,CAAA,QAAA;AAAA;;;yHAIqCA,MAAA,YAAA,CAAY,IAAA,cAAA,qCAC3DA,MAAA,YAAA,IAAY,YAAA,IAAA;;;;UAUZA,MAAA,eAAA,GAAe;;;;;;;;;;;;;;;;"}