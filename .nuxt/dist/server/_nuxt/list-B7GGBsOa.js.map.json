{"file":"list-B7GGBsOa.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAmHA,UAAM,QAAQ,SAAA;AACC,cAAA;AACf,UAAM,WAAW,UAAU,WAAW;AAUtC,UAAM,cAAc,SAAS,MAAM;AACjC,aAAO,SAAS,MAAM,MAAM,IAAI,KAAK;AAAA,IACvC,CAAC;AAED,UAAM,EAAE,MAAM,SAAS,OAAO,QAAA,KAAY,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAM,SAAS,eAAe;AAAA,MACtE,OAAO;AAAA,QACL,MAAM;AAAA,QACN,OAAO;AAAA,MAAA;AAAA,MAET,OAAO,CAAC,WAAW;AAAA,IAAA,GACrB,aAAC,CAAA;AA2CD,UAAM,eAAe,SAAS,MAAM;AAClC,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,mBAAmB,CAAA;AAElD,YAAM,aAAa,KAAK,MAAM,WAAW;AACzC,YAAM,UAAU,YAAY;AAC5B,YAAM,QAAQ,CAAA;AAEd,UAAI,YAAY,KAAK,IAAI,GAAG,UAAU,CAAC;AACvC,UAAI,UAAU,KAAK,IAAI,YAAY,UAAU,CAAC;AAE9C,UAAI,WAAW,GAAG;AAChB,kBAAU,KAAK,IAAI,GAAG,UAAU;AAAA,MAClC;AAEA,UAAI,WAAW,aAAa,GAAG;AAC7B,oBAAY,KAAK,IAAI,GAAG,aAAa,CAAC;AAAA,MACxC;AAEA,eAAS,IAAI,WAAW,KAAK,SAAS,KAAK;AACzC,cAAM,KAAK,CAAC;AAAA,MACd;AAEA,aAAO;AAAA,IACT,CAAC;AAED,UAAM,aAAa,CAAC,eAAe;AACjC,UAAI,CAAC,WAAY,QAAO;AAExB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,YAAM,OAAO,KAAK,YAAA;AAClB,YAAM,QAAQ,OAAO,KAAK,SAAA,IAAa,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAA,CAAS,EAAE,SAAS,GAAG,GAAG;AAElD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG;AAAA,IAChC;;mBArNOC,eAAAC,WAAA,EAAA,OAAM,eAAW,MAAA,CAAA,iKAIPC,MAAA,QAAA,CAAQ;UAIVA,MAAA,OAAA,GAAO;;iBAIFA,MAAA,KAAA,GAAK;AACJ,cAAA,mDAAAC,eAAAD,MAAA,KAAA,EAAM,OAAO,CAAA,QAAA;AAAA,iBAGdA,MAAA,IAAA,KAAQA,MAAA,IAAA,EAAK,SAAO;sGAErBA,MAAA,IAAA,EAAK,WAAW,UAAU,sBACjCA,MAAA,IAAA,EAAK,WAAW,WAAW,sBAASA,MAAA,IAAA,EAAK,WAAW,UAAU;sBAc5CA,MAAA,IAAA,EAAK,MAAI,CAAlB,UAAK;2DACPC,eAAA,MAAM,MAAM,6BACZA,eAAA,MAAM,MAAM,sFAGZA,eAAA,MAAM,KAAK,iCAGXA,eAAA,MAAM,KAAK,4CACX,WAAW,MAAM,OAAO,CAAA;;;YAK1BD,MAAA,IAAA,EAAK,KAAK,WAAM,GAAA;;;;;YAKhBA,MAAA,IAAA,EAAK,WAAW,aAAU,GAAA;wFAGtBA,MAAA,WAAA,MAAW,CAAA,IAAA,cAAA,iFAQXA,MAAA,WAAA,MAAW,CAAA,IAAA,cAAA;AAOJE,wBAAAF,MAAA,YAAA,IAAX,YAAO;oCAGiBG,eAAA,CAAA,YAAA,EAAA,QAAA,YAAYH,MAAA,WAAA,EAAA,CAAW,CAAA,qCAEnD,OAAO;;kCAKCI,sBAAAJ,MAAA,WAAA,MAAgBA,MAAA,IAAA,EAAK,WAAW,UAAU,IAAA,cAAA,2DAQ1CI,sBAAAJ,MAAA,WAAA,MAAgBA,MAAA,IAAA,EAAK,WAAW,UAAU,IAAA,cAAA;;;;;;;;;;;;;;;;;;;","names":["_withAsyncContext","_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate","_ssrRenderList","_ssrRenderClass","_ssrIncludeBooleanAttr"],"sources":["../../../../pages/board/list.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"header\">\r\n      <h1>게시판</h1>\r\n      <div class=\"user-info\">\r\n        <span>{{ userName }}님 환영합니다</span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"pending\" class=\"loading\">\r\n      데이터를 불러오는 중...\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"error\">\r\n      오류가 발생했습니다: {{ error.message }}\r\n    </div>\r\n    \r\n    <div v-else-if=\"data && data.success\">\r\n      <div class=\"board-info\">\r\n        전체 게시글: {{ data.pagination.totalCount }}개 \r\n        ({{ data.pagination.currentPage }} / {{ data.pagination.totalPages }} 페이지)\r\n      </div>\r\n      \r\n      <table class=\"board-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>번호</th>\r\n            <th>작성자</th>\r\n            <th>제목</th>\r\n            <th>조회수</th>\r\n            <th>등록일</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"board in data.data\" :key=\"board.bno\">\r\n            <td>{{ board.rownum }}</td>\r\n            <td>{{ board.writer }}</td>\r\n            <td class=\"title-cell\">\r\n              <a @click=\"goToView(board.bno)\" class=\"title-link\">\r\n                {{ board.title }}\r\n              </a>\r\n            </td>\r\n            <td>{{ board.hitno }}</td>\r\n            <td>{{ formatDate(board.regDate) }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      \r\n      <div v-if=\"data.data.length === 0\" class=\"no-data\">\r\n        등록된 게시글이 없습니다.\r\n      </div>\r\n      \r\n      <!-- 페이지네이션 -->\r\n      <div v-if=\"data.pagination.totalPages > 1\" class=\"pagination\">\r\n        <button \r\n          @click=\"goToPage(1)\" \r\n          :disabled=\"currentPage === 1\"\r\n          class=\"page-btn\"\r\n        >\r\n          처음\r\n        </button>\r\n        \r\n        <button \r\n          @click=\"goToPage(currentPage - 1)\" \r\n          :disabled=\"currentPage === 1\"\r\n          class=\"page-btn\"\r\n        >\r\n          이전\r\n        </button>\r\n        \r\n        <button\r\n          v-for=\"pageNum in visiblePages\"\r\n          :key=\"pageNum\"\r\n          @click=\"goToPage(pageNum)\"\r\n          :class=\"['page-btn', { active: pageNum === currentPage }]\"\r\n        >\r\n          {{ pageNum }}\r\n        </button>\r\n        \r\n        <button \r\n          @click=\"goToPage(currentPage + 1)\" \r\n          :disabled=\"currentPage === data.pagination.totalPages\"\r\n          class=\"page-btn\"\r\n        >\r\n          다음\r\n        </button>\r\n        \r\n        <button \r\n          @click=\"goToPage(data.pagination.totalPages)\" \r\n          :disabled=\"currentPage === data.pagination.totalPages\"\r\n          class=\"page-btn\"\r\n        >\r\n          마지막\r\n        </button>\r\n      </div>\r\n      \r\n      <!-- 하단 버튼 -->\r\n      <div class=\"bottom-buttons\">\r\n        <button @click=\"goToWrite\" class=\"write-btn\">\r\n          게시물 등록\r\n        </button>\r\n        <button @click=\"handleLogout\" class=\"logout-btn\">\r\n          로그아웃\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\n//definePageMeta({\r\n//  middleware: 'auth'  // 미들웨어 적용\r\n//});\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst userName = useCookie('user_name');\r\n\r\n// 인증 체크\r\nonMounted(() => {\r\n  const token = useCookie('auth_token');\r\n  if (!token.value) {\r\n    router.push('/');\r\n  }\r\n});\r\n\r\nconst currentPage = computed(() => {\r\n  return parseInt(route.query.page) || 1;\r\n});\r\n\r\nconst { data, pending, error, refresh } = await useFetch('/api/boards', {\r\n  query: {\r\n    page: currentPage,\r\n    limit: 10\r\n  },\r\n  watch: [currentPage]\r\n});\r\n\r\nconst goToPage = (page) => {\r\n  router.push({ path: '/board/list', query: { page } });\r\n};\r\n\r\nconst goToWrite = () => {\r\n  router.push('/board/write');\r\n};\r\n\r\nconst goToView = (bno) => {\r\n  router.push(`/board/${bno}`);\r\n};\r\n\r\nconst handleLogout = async () => {\r\n  try {\r\n    const response = await $fetch('/api/auth/logout', {\r\n      method: 'POST'\r\n    });\r\n\r\n    if (response.socialType === '2' || response.socialType === 'kakao') {\r\n      const restApiKey = response.kakaoApiKey;\r\n      const logoutRedirectUri = 'http://localhost:3000/api/auth/kakao/logout-callback';\r\n      \r\n      window.location.href = `https://kauth.kakao.com/oauth/logout?client_id=${restApiKey}&logout_redirect_uri=${logoutRedirectUri}`;\r\n      return;\r\n    }\r\n    \r\n    // 쿠키 삭제\r\n    const authToken = useCookie('auth_token');\r\n    const userIdCookie = useCookie('user_id');\r\n    const userNameCookie = useCookie('user_name');\r\n    \r\n    authToken.value = null;\r\n    userIdCookie.value = null;\r\n    userNameCookie.value = null;\r\n    \r\n    router.push('/');\r\n  } catch (error) {\r\n    console.error('Logout error:', error);\r\n  }\r\n};\r\n\r\nconst visiblePages = computed(() => {\r\n  if (!data.value || !data.value.pagination) return [];\r\n  \r\n  const totalPages = data.value.pagination.totalPages;\r\n  const current = currentPage.value;\r\n  const pages = [];\r\n  \r\n  let startPage = Math.max(1, current - 2);\r\n  let endPage = Math.min(totalPages, current + 2);\r\n  \r\n  if (current <= 3) {\r\n    endPage = Math.min(5, totalPages);\r\n  }\r\n  \r\n  if (current >= totalPages - 2) {\r\n    startPage = Math.max(1, totalPages - 4);\r\n  }\r\n  \r\n  for (let i = startPage; i <= endPage; i++) {\r\n    pages.push(i);\r\n  }\r\n  \r\n  return pages;\r\n});\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '';\r\n  \r\n  const date = new Date(dateString);\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  \r\n  return `${year}-${month}-${day}`;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\nh1 {\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.user-info {\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.board-info {\r\n  margin-bottom: 10px;\r\n  padding: 10px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 4px;\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.board-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background-color: white;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.board-table th,\r\n.board-table td {\r\n  padding: 12px;\r\n  text-align: center;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\n.board-table th {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  font-weight: bold;\r\n}\r\n\r\n.board-table tbody tr:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.board-table td:first-child {\r\n  width: 80px;\r\n}\r\n\r\n.board-table td:nth-child(2) {\r\n  width: 120px;\r\n}\r\n\r\n.board-table td:nth-child(4) {\r\n  width: 80px;\r\n}\r\n\r\n.board-table td:nth-child(5) {\r\n  width: 120px;\r\n}\r\n\r\n.title-cell {\r\n  text-align: left !important;\r\n}\r\n\r\n.title-link {\r\n  color: #333;\r\n  text-decoration: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.title-link:hover {\r\n  color: #4CAF50;\r\n  text-decoration: underline;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 40px;\r\n  color: #666;\r\n  font-size: 18px;\r\n}\r\n\r\n.error {\r\n  padding: 20px;\r\n  background-color: #ffebee;\r\n  color: #c62828;\r\n  border-radius: 4px;\r\n  margin: 20px 0;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 40px;\r\n  color: #999;\r\n  font-size: 16px;\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin: 30px 0;\r\n}\r\n\r\n.page-btn {\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  background-color: white;\r\n  color: #333;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  transition: all 0.3s;\r\n  min-width: 40px;\r\n}\r\n\r\n.page-btn:hover:not(:disabled) {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border-color: #4CAF50;\r\n}\r\n\r\n.page-btn.active {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  border-color: #4CAF50;\r\n  font-weight: bold;\r\n}\r\n\r\n.page-btn:disabled {\r\n  background-color: #f5f5f5;\r\n  color: #ccc;\r\n  cursor: not-allowed;\r\n  border-color: #e0e0e0;\r\n}\r\n\r\n.bottom-buttons {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.write-btn,\r\n.logout-btn {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.write-btn {\r\n  background-color: #4CAF50;\r\n  color: white;\r\n}\r\n\r\n.write-btn:hover {\r\n  background-color: #45a049;\r\n}\r\n\r\n.logout-btn {\r\n  background-color: #f44336;\r\n  color: white;\r\n}\r\n\r\n.logout-btn:hover {\r\n  background-color: #d32f2f;\r\n}\r\n</style>"],"version":3}